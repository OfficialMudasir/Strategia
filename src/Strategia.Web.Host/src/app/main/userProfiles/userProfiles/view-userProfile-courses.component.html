<div [@routerTransition]>
    <div [class]="containerClass">

        <div class="d-flex flex-column flex-xl-row">
            <!--begin::Sidebar-->
            <div class="flex-column flex-lg-row-auto w-100 w-xl-350px mt-10 mb-10">

                <!--begin::Card-->
                <div class="card mb-xl-8  h-100">
                    <!--begin::Card body-->
                    <div *ngIf="!edit" class="card-body pt-15">
                        <!--begin::Summary-->
                        <div class="d-flex flex-center flex-column mb-5">
                            <!--begin::Avatar-->
                            <div class="symbol symbol-100px symbol-circle mb-7">
                                <img [src]="profilePicture" alt="user" [class]="profileImageCssClass" />
                            </div>
                            <!--end::Avatar-->
                            <!--begin::Name-->
                            <a href="javascript:;" class="fs-3 text-gray-900 fw-bold mb-1">
                                {{userprofile?.userProfile?.profileName}}
                            </a>
                            <!--end::Name-->
                            <!--begin::Position-->
                            <div class="fs-5 fw-semibold text-muted mb-6">
                                {{userprofile?.userProfile?.profileRole}}
                            </div>
                            <!--end::Position-->
                        </div>
                        <!--end::Summary-->

                        <div class="separator separator-dashed my-3"></div>

                        <!--begin::Details content-->
                        <div id="kt_customer_view_details" class="collapse show">
                            <div class="py-5 fs-6">
                                <div
                                    class="menu menu-column menu-rounded menu-state-bg menu-state-title-primary menu-state-icon-primary menu-state-bullet-primary mb-10">
                                    <!--begin::Menu item-->

                                    <div class="menu-item">
                                        <!--begin::Marked-->
                                        <span (click)="navigateToProfile();" class="menu-link text-gray-500 fs-4">
                                            <span class="menu-icon w-30px">
                                                <i class="bi bi-person fs-1"></i>
                                            </span>
                                            <span class="menu-title">{{ l('My Digital Profile') }}</span>
                                        </span>
                                        <!--end::Marked-->
                                    </div>
                                    <!--end::Menu item-->

                                    <!--begin::Menu item-->
                                    <div class="menu-item">
                                        <!--begin::Marked-->
                                        <span (click)="tabId=1" class="menu-link text-gray-500 fs-4 active">
                                            <span class="menu-icon w-30px">
                                                <i class="bi bi-bookmark fs-2"></i>
                                            </span>
                                            <span class="menu-title">{{ l('My Courses') }}</span>
                                        </span>
                                        <!--end::Marked-->
                                    </div>
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <!--<div class="menu-item" (click)="tabId=3">-->
                                    <!--begin::Marked-->
                                    <!--<span class="menu-link text-gray-500" [class.active]="tabId === 3">
                                            <span class="menu-icon">
                                                <i class="ki-duotone ki-lock  fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                </i>
                                            </span>
                                            <span class="menu-title fw-bold">{{ l('Profile Privacy') }}</span>
                                        </span>-->
                                    <!--end::Marked-->
                                    <!--</div>-->
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <!--<div class="menu-item" (click)="tabId=4">-->
                                    <!--begin::Marked-->
                                    <!--<span class="menu-link text-gray-500" [class.active]="tabId === 4">
                                            <span class="menu-icon">
                                                <i class="ki-duotone ki-setting-2  fs-2">
                                                    <span class="path1"></span>
                                                    <span class="path2"></span>
                                                    <span class="path3"></span>
                                                </i>
                                            </span>
                                            <span class="menu-title fw-bold">{{ l('Settings') }}</span>
                                        </span>-->
                                    <!--end::Marked-->
                                    <!--</div>-->
                                    <!--end::Menu item-->
                                    <!--begin::Menu item-->
                                    <div class="menu-item" (click)="logout()">
                                        <!--begin::Marked-->
                                        <span class="menu-link text-gray-500 fs-4" [class.active]="tabId === 5">
                                            <span class="menu-icon w-30px">
                                                <i class="bi bi-box-arrow-in-right fs-1"></i>
                                            </span>
                                            <span class="menu-title">{{ l('Sign Out') }}</span>
                                        </span>
                                        <!--end::Marked-->
                                    </div>
                                    <!--end::Menu item-->
                                </div>


                            </div>
                        </div>
                        <!--end::Details content-->
                    </div>
                    <!--end::Card body-->
                </div>
                <!--end::Card-->
            </div>
            <!--end::Sidebar-->
            <!--begin::Content-->
            <div class="flex-lg-row-fluid ms-lg-10  mt-10 mb-10">
                <div class="card h-100 bg-transparent border-0">

                    <!--MyCourses Start-->
                    <div *ngIf="tabId==1">

                        <div *ngIf="ViewUserProfileMyCoursesComponent.tabId == 1" class="mb-3 ms-10">
                            <a href="javascript:;" class="me-2 cursor-pointer d-flex align-items-center gap-2 fw-bold"
                               (click)="tabId=2;$event.stopPropagation();">
                                <span class="">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M12 8V16" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M8 12H16" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </span>
                                {{ l('Find Courses') }}
                            </a>
                        </div>

                        <viewUserProfileMyCourses #ViewUserProfileMyCoursesComponent [inputUserProfileId]="userProfileId" [(tabId)]="tabId">
                        </viewUserProfileMyCourses>
                    </div>
                    <!--MyCourses End-->
                    
                    <!--Courses Start-->
                    <div *ngIf="tabId==2" class="card-body  p-0">
                        <div class="d-flex flex-column flex-xl-row">
                            <div class="flex-lg-row-fluid">
                                <div class=" ">
                                    <div class="fs-5 fw-semibold">

                                        <div class="row">

                                            <div class="col-6">

                                                <div class="mb-3 ">
                                                    <a href="javascript:;" class="me-2 cursor-pointer d-flex align-items-center gap-2 fw-bold"
                                                       (click)="tabId=1;$event.stopPropagation();">
                                                        <span class="fa fa-chevron-left"></span>
                                                            <!--   <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                                    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                                    <path d="M12 8V16" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                                    <path d="M8 12H16" stroke="#FFFF54" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                                                </svg>
                                                            </span>-->
                                                            {{ l('Back') }}
</a>
                                                </div>

                                            </div>
                                            <div class="col-6">
                                                <!-------------------->
                                                <div class="search position-relative mb-8">
                                                    <input type="text" class="form-control"
                                                           placeholder="Search Course..." [(ngModel)]="searchTerm"
                                                           (input)="onSearchChange()">
                                                    <i class="bi bi-search position-absolute"></i>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="courses-data-outer">
                                            <div class="row">
                                                <div class="col-6" *ngFor="let course of courses; let i = index">

                                                    <!---------------------------->

                                                    <div class="card card-flush mb-6 rounded-5 border-0">
                                                        <!--begin::Body-->

                                                        <div class="card-body p-0">
                                                            <!--begin::Row-->
                                                            <div class="row m-0">

                                                                <!--begin::Col-->
                                                                <div class="col-sm-3 p-0">
                                                                    <div class="left-img h-100">
                                                                        <!--begin::Image-->
                                                                        <img :src={{course.course.titleImage}} alt=""
                                                                             class="h-100 mw-100">
                                                                        <!--end::Image-->
                                                                    </div>
                                                                </div>
                                                                <!--end::Col-->
                                                                <!--begin::Col-->
                                                                <div class="col-sm-9 py-4 px-4">
                                                                    <div class="h-100">
                                                                        <!--begin::Wrapper-->
                                                                        <div class="d-flex flex-column mb-6">
                                                                            <!--begin::Header-->
                                                                            <div class="mb-2">
                                                                                <!--begin::Headin-->
                                                                                <div class="d-flex flex-stack ">
                                                                                    <!--begin::Title-->
                                                                                    <div class="flex-shrink-0 w-100">
                                                                                        <!--<span class="text-gray-500 fs-7 fw-bold me-2 d-block lh-1 pb-1">{{ l('Featured') }}</span>-->
                                                                                        <a href="javascript:;"
                                                                                           (click)="selectedCourseId=course.course.id; tabId=3"
                                                                                           class="text-gray-900 text-hover-primary fs-6 text-truncate w-100">{{course.course.name}}</a>
                                                                                    </div>
                                                                                    <!--end::Title-->

                                                                                </div>
                                                                                <!--end::Heading-->
                                                                            </div>
                                                                            <!--end::Header-->
                                                                            <!--begin::Body-->
                                                                            <div class="min-h-60px">

                                                                                <!--begin::Text-->
                                                                                <span class="fw-semibold text-gray-500 fs-8 ellipse-wrap">
                                                                                    {{
 course.course.description.length
                                                                                    > 300 ?
                                                                                    course.course.description.slice(0,
                                                                                    300) + '...' :
                                                                                    course.course.description
                                                                                    }}
                                                                                </span>


                                                                                <!--end::Text-->
                                                                            </div>
                                                                            <!--end::Body-->

                                                                        </div>
                                                                        <!--end::Wrapper-->
                                                                        <!--begin::Actions-->
                                                                        <div class="d-flex align-items-center gap-4 justify-content-between">
                                                                            <div class="d-flex align-items-center">
                                                                                <div class="symbol symbol-25px me-2 rounded-circle">
                                                                                    <img [src]="course.course.authorProfilePicture"
                                                                                         alt="user"
                                                                                         [class]="profileImageCssClass" />
                                                                                </div>
                                                                                <div class="d-flex justify-content-start flex-column">
                                                                                    <a href="javascript:;"
                                                                                       class="text-gray-900 fw-normal text-hover-primary fs-7 disabled-hover">{{course.course.authorName}}</a>
                                                                                    <!-- <span class="text-gray-500 fw-semibold d-block fs-7">{{course.course.authorDescription}}</span> -->
                                                                                </div>
                                                                            </div>
                                                                            <div class="text-end d-flex gap-4">
                                                                                <span class="book-wrap d-flex gap-2 fs-8 align-items-center">
                                                                                    <i class="bi bi-book fs-7 text-gray-500"></i>
                                                                                    <span>
                                                                                        {{course.lessonCount}} {{
                                                                                        l('Lessons')
                                                                                        }}
                                                                                    </span>
                                                                                </span>
                                                                                <span class=" d-flex gap-2 fs-8 align-items-center">
                                                                                    <i class="bi bi-clock fs-7 text-gray-500"></i>
                                                                                    <span>{{course.course.lessonTime}}</span>
                                                                                </span>



                                                                                <!--<a href="javscript:;" (click)="selectedCourseId=course.course.id; tabId=2" class="fs-4">
                                                                    {{ l('See in detail') }}-->
                                                                                <!--<i class="ki-duotone ki-exit-right-corner fs-4 ms-1"><span class="path1"></span><span class="path2"></span></i>-->
                                                                                <!--</a>-->

                                                                            </div>
                                                                        </div>
                                                                        <div class="btn-detail-wrap d-flex align-items-center justify-content-between px-4 pt-4  mt-4 border border-top-1">
                                                                            <span class="fs-7">
                                                                                <!-- <i class="bi bi-calendar4 text-gray-500 me-1"></i>
                                                                Due date:  Oct 21, 2023 -->
                                                                            </span>
                                                                            <span (click)="selectedCourseId=course.course.id; tabId=3"
                                                                                  class="link" contenteditable="false"
                                                                                  style="cursor: pointer;">
                                                                                <span class="fs-4 cursor-pointer">
                                                                                    {{
                                                                                    l('See in detail')
                                                                                    }}
                                                                                </span>
                                                                            </span>
                                                                        </div>
                                                                        <!--end::Actions-->
                                                                    </div>
                                                                </div>
                                                                <!--end::Col-->
                                                            </div>
                                                            <!--end::Row-->
                                                        </div>
                                                        <!--end::Body-->

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--Courses End-->
                    
                    <!--Course Start-->
                    <div *ngIf="tabId==3" class="">

                        <div class="mb-3 ">
                            <a href="javascript:;" class="me-2 cursor-pointer d-flex align-items-center gap-2 fw-bold"
                               (click)="tabId=1;$event.stopPropagation();">
                                <span class="fa fa-chevron-left"></span>
                                {{ l('Back') }}
                            </a>
                        </div>

                        <viewCourse (courseLessonActivitySelected)="handleChildEvent($event)"
                                    [inputCourseId]="selectedCourseId" [inputUserProfileId]="userProfileId"></viewCourse>

                        <div class="mt-3 ">
                            <a href="javascript:;" class="me-2 cursor-pointer d-flex align-items-center gap-2 fw-bold"
                               (click)="tabId=1;$event.stopPropagation();">
                                <span class="fa fa-chevron-left"></span>
                                {{ l('Back') }}
                            </a>
                        </div>

                    </div>
                    <!--Course   End-->

                    <!--Lesson activity Start-->
                    <div *ngIf="tabId==4" class="p-10 ">
                        <viewCourseLessonActivity [inputCourseLessonActivityId]="selectedCourseLessonActivityId">
                        </viewCourseLessonActivity>

                        <span (click)="tabId=3;" class="btn btn-sm btn-outline mb-12 btn-outline-primary"
                              contenteditable="false" style="cursor: pointer;">
                            {{ l('Back') }}
                        </span>
                    </div>
                    <!--Lesson activity   End-->
                </div>
            </div>
            <!--end::Content-->
        </div>
    </div>
</div>