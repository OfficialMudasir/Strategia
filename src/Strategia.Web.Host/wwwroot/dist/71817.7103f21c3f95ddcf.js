"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[71817],{71817:(E,u,i)=>{i.r(u),i.d(u,{ResetPasswordModule:()=>z});var m=i(60263),d=i(91170),h=i(64369),v=i(58127),p=i(37857);class g extends p.BiX{}var f=i(28746),e=i(41571),y=i(30659),w=i(15260),x=i(36895),s=i(24006),S=i(8297),C=i(98218),q=i(61228),P=i(73565);function R(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"ul",17)(1,"li",18),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"li",18),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"li",18),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"li",18),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"li",18),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"localize"),e.\u0275\u0275elementEnd()()),2&r){const n=e.\u0275\u0275nextContext(),t=e.\u0275\u0275reference(12);e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!t.errors.requireDigit),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,10,"PasswordComplexity_RequireDigit_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireLowercase),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,12,"PasswordComplexity_RequireLowercase_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireUppercase),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,14,"PasswordComplexity_RequireUppercase_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireNonAlphanumeric),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,16,"PasswordComplexity_RequireNonAlphanumeric_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requiredLength),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(15,18,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," ")}}function I(r,o){if(1&r&&(e.\u0275\u0275elementStart(0,"ul",17)(1,"li",18),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"li",18),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"li",18),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"li",18),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"li",18),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"li",18),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"localize"),e.\u0275\u0275elementEnd()()),2&r){const n=e.\u0275\u0275nextContext(),t=e.\u0275\u0275reference(18);e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!t.errors.requireDigit),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,12,"PasswordComplexity_RequireDigit_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireLowercase),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,14,"PasswordComplexity_RequireLowercase_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireUppercase),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,16,"PasswordComplexity_RequireUppercase_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requireNonAlphanumeric),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,18,"PasswordComplexity_RequireNonAlphanumeric_Hint")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!t.errors.requiredLength),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(15,20,"PasswordComplexity_RequiredLength_Hint",n.passwordComplexitySetting.requiredLength)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",t.valid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,23,"PasswordsDontMatch"))}}const b=[{path:"",component:(()=>{class r extends v.c{constructor(n,t,a,l,c,B,M){super(n),this._accountService=t,this._router=a,this._activatedRoute=l,this._loginService=c,this._profileService=B,this._recaptchaWrapperService=M,this.model=new g,this.passwordComplexitySetting=new p.qSp,this.saving=!1}ngOnInit(){this._profileService.getPasswordComplexitySetting().subscribe(n=>{this.passwordComplexitySetting=n.setting}),this._activatedRoute.snapshot.queryParams.c?(this.model.c=this._activatedRoute.snapshot.queryParams.c,this._accountService.resolveTenantId(new p.jKd({c:this.model.c})).subscribe(n=>{this.appSession.changeTenantIfNeeded(n)})):(this.model.userId=this._activatedRoute.snapshot.queryParams.userId,this.model.resetCode=this._activatedRoute.snapshot.queryParams.resetCode,this.appSession.changeTenantIfNeeded(this.parseTenantId(this._activatedRoute.snapshot.queryParams.tenantId)))}ngAfterViewInit(){this._recaptchaWrapperService.setCaptchaVisibilityOnLogin()}save(){this.saving=!0,this._accountService.resetPassword(this.model).pipe((0,f.x)(()=>{this.saving=!1})).subscribe(n=>{if(!n.canLogin)return void this._router.navigate(["account/login"]);let t=a=>{this.saving=!0,this._loginService.authenticateModel.userNameOrEmailAddress=n.userName,this._loginService.authenticateModel.password=this.model.password,this._loginService.authenticate(()=>{this.saving=!1},null,a)};this._recaptchaWrapperService.useCaptchaOnLogin()?this._recaptchaWrapperService.getService().execute("login").subscribe(a=>t(a)):t(null)})}parseTenantId(n){let t=n?parseInt(n,10):void 0;return Number.isNaN(t)&&(t=void 0),t}}return r.\u0275fac=function(n){return new(n||r)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(p.k4Y),e.\u0275\u0275directiveInject(d.F0),e.\u0275\u0275directiveInject(d.gz),e.\u0275\u0275directiveInject(y.r),e.\u0275\u0275directiveInject(p.qAB),e.\u0275\u0275directiveInject(w.o))},r.\u0275cmp=e.\u0275\u0275defineComponent({type:r,selectors:[["ng-component"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:31,vars:39,consts:[[1,"login-form"],[1,"pb-13","pt-lg-0","pt-5"],[1,"fw-bolder","text-dark","fs-h4","fs-h1-lg"],["method","post",1,"login-form","form",3,"ngSubmit"],["resetPassForm","ngForm"],[1,"mb-5"],["type","password","name","Password","validateEqual","PasswordRepeat","reverse","true","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength","ngModelChange"],["Password","ngModel"],[1,"mb-5",3,"hidden"],["class","form-text text-danger",4,"ngIf"],["type","password","name","PasswordRepeat","validateEqual","Password","reverse","false","required","",1,"form-control","form-control-solid","h-auto","py-7","px-6","rounded-lg","fs-h6",3,"ngModel","placeholder","requireDigit","requireLowercase","requireUppercase","requireNonAlphanumeric","requiredLength"],["PasswordRepeat","ngModel"],[1,"pb-lg-0","pb-5"],["routerLink","/account/login","type","button",1,"btn","btn-outline","btn-outline-primary","fw-bolder","fs-h6","px-8","py-4","my-3",3,"disabled"],[1,"fa","fa-arrow-left"],["type","submit",1,"btn","btn-primary","fw-bolder","fs-h6","px-8","py-4","my-3","me-3",3,"disabled","buttonBusy","busyText"],[1,"bi","bi-check2","fs-3"],[1,"form-text","text-danger"],[3,"hidden"]],template:function(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h3",2),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"form",3,4),e.\u0275\u0275listener("ngSubmit",function(){return t.save()}),e.\u0275\u0275elementStart(7,"p"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",5)(11,"input",6,7),e.\u0275\u0275listener("ngModelChange",function(l){return t.model.password=l}),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",8),e.\u0275\u0275template(15,R,16,21,"ul",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",5),e.\u0275\u0275element(17,"input",10,11),e.\u0275\u0275pipe(19,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",8),e.\u0275\u0275template(21,I,19,25,"ul",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",12)(23,"button",13),e.\u0275\u0275element(24,"i",14),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"button",15),e.\u0275\u0275element(28,"i",16),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"localize"),e.\u0275\u0275elementEnd()()()()),2&n){const a=e.\u0275\u0275reference(6),l=e.\u0275\u0275reference(12),c=e.\u0275\u0275reference(18);e.\u0275\u0275property("@routerTransition",void 0),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(4,27,"ChangePassword")," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,29,"PleaseEnterYourNewPassword")," "),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(13,31,"Password")),e.\u0275\u0275property("ngModel",t.model.password)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",a.form.valid||a.form.pristine),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.errors),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(19,33,"PasswordRepeat")),e.\u0275\u0275property("ngModel",t.model.passwordRepeat)("requireDigit",t.passwordComplexitySetting.requireDigit)("requireLowercase",t.passwordComplexitySetting.requireLowercase)("requireUppercase",t.passwordComplexitySetting.requireUppercase)("requireNonAlphanumeric",t.passwordComplexitySetting.requireNonAlphanumeric)("requiredLength",t.passwordComplexitySetting.requiredLength),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",a.form.valid||a.form.pristine),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",c.errors),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.saving),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(26,35,"Back")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!a.form.valid)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(30,37,"Submit")," ")}},dependencies:[x.O5,s.\u0275NgNoValidate,s.DefaultValueAccessor,s.NgControlStatus,s.NgControlStatusGroup,s.RequiredValidator,s.NgModel,s.NgForm,d.rH,S.z,C.J,q.L,P.F],encapsulation:2,data:{animation:[(0,h.RP)()]}}),r})(),pathMatch:"full"}];let L=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[d.Bz.forChild(b),d.Bz]}),r})();var N=i(12749);let z=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=e.\u0275\u0275defineInjector({imports:[m.o,N.y,L]}),r})()}}]);