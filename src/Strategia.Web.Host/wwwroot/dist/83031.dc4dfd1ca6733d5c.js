"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[83031],{95216:(B,E,a)=>{a.d(E,{S:()=>x});var f=a(58127),t=a(41571),e=a(37857),C=a(49927),v=a(36895),T=a(438),M=a(73565);const b=["entityChangeDetailModal"];function I(m,h){if(1&m){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",9)(1,"h4",10)(2,"span"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"localize"),t.\u0275\u0275pipe(5,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(6,"br")(7,"small",11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"button",12),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const u=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(u.close())}),t.\u0275\u0275elementEnd()()}if(2&m){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate2("",t.\u0275\u0275pipeBind1(4,4,"Detail")," - ",t.\u0275\u0275pipeBind1(5,6,n.entityChange.entityTypeFullName),""),t.\u0275\u0275advance(4),t.\u0275\u0275property("innerHTML",n.l("CreatedAtByUser",n.entityChange.changeTime,n.entityChange.userName),t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("aria-label",n.l("Close"))}}function D(m,h){if(1&m&&(t.\u0275\u0275elementStart(0,"div",13)(1,"div",14)(2,"h3",15)(3,"span",16),t.\u0275\u0275text(4),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(5,"div",17)(6,"div",18)(7,"div",19)(8,"div",20),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"div",21),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(13,"div",22)(14,"div",20),t.\u0275\u0275text(15),t.\u0275\u0275pipe(16,"localize"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(17,"div",21),t.\u0275\u0275text(18),t.\u0275\u0275elementEnd()()()()()),2&m){const n=h.$implicit,p=t.\u0275\u0275nextContext();t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(n.propertyName),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(10,5,"OriginalValue")," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",p.getPropertyChangeValue(n.originalValue,n.propertyTypeFullName)," "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(16,7,"NewValue")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",p.getPropertyChangeValue(n.newValue,n.propertyTypeFullName)," ")}}const P=function(){return{backdrop:"static"}};let x=(()=>{class m extends f.c{constructor(n,p,u){super(n),this._auditLogService=p,this._dateTimeService=u,this.active=!1}getPropertyChangeValue(n,p){return n&&(n=n.replace(/^['"]+/g,"").replace(/['"]+$/g,""),this.isDate(n,p)?this._dateTimeService.formatDate(this._dateTimeService.fromISODateString(n),"yyyy-LL-dd HH:mm:ss"):"null"===n?"":n)}isDate(n,p){return p.includes("DateTime")&&!isNaN(Date.parse(n).valueOf())}show(n){const p=this;p.active=!0,p.entityChange=n,this._auditLogService.getEntityPropertyChanges(n.id).subscribe(u=>{p.entityPropertyChanges=u}),p.modal.show()}close(){this.active=!1,this.modal.hide()}}return m.\u0275fac=function(n){return new(n||m)(t.\u0275\u0275directiveInject(t.Injector),t.\u0275\u0275directiveInject(e.xWy),t.\u0275\u0275directiveInject(C.C))},m.\u0275cmp=t.\u0275\u0275defineComponent({type:m,selectors:[["entityChangeDetailModal"]],viewQuery:function(n,p){if(1&n&&t.\u0275\u0275viewQuery(b,7),2&n){let u;t.\u0275\u0275queryRefresh(u=t.\u0275\u0275loadQuery())&&(p.modal=u.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:11,vars:7,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","entityChangeDetailModal","aria-hidden","true",1,"modal","fade",3,"config"],["entityChangeDetailModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],["class","modal-header",4,"ngIf"],[1,"modal-body"],["class","card card-custom gutter-b",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline","btn-outline-primary","fw-bold",3,"click"],[1,"modal-header"],[1,"modal-title"],[3,"innerHTML"],["type","button",1,"btn-close",3,"click"],[1,"card","card-custom","gutter-b"],[1,"card-header","py-5"],[1,"card-title"],[1,"card-label"],[1,"card-body","py-0"],[1,"row","m-0"],[1,"col","px-8","py-6","me-8"],[1,"fs-sm","text-muted","fw-bold"],[1,"fw-bolder"],[1,"col","px-8","py-6"]],template:function(n,p){1&n&&(t.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3),t.\u0275\u0275template(4,I,9,8,"div",4),t.\u0275\u0275elementStart(5,"div",5),t.\u0275\u0275template(6,D,19,9,"div",6),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"div",7)(8,"button",8),t.\u0275\u0275listener("click",function(){return p.close()}),t.\u0275\u0275text(9),t.\u0275\u0275pipe(10,"localize"),t.\u0275\u0275elementEnd()()()()()),2&n&&(t.\u0275\u0275property("config",t.\u0275\u0275pureFunction0(6,P)),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",p.entityChange),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",p.entityPropertyChanges),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(10,4,"Close")," "))},dependencies:[v.sg,v.O5,T.Z,M.F],encapsulation:2}),m})()},91851:(B,E,a)=>{a.d(E,{A:()=>s});var f=a(58127),t=a(28746),e=a(41571),C=a(37857),v=a(36895),T=a(17806),M=a(7318),b=a(10805),I=a(1997),D=a(438),P=a(95216),x=a(80659),m=a(73565);const h=["entityChangeDetailModal"],n=["modal"],p=["dataTable"],u=["paginator"];function O(d,y){if(1&d&&(e.\u0275\u0275elementStart(0,"h4",20),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()),2&d){const r=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"ChangeLogs")+":"+e.\u0275\u0275pipeBind1(3,3,r.options.entityTypeFullName)+"("+r.options.entityTypeDescription+")"," ")}}function R(d,y){1&d&&(e.\u0275\u0275elementStart(0,"tr")(1,"th",21),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"th"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th"),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd()()),2&d&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,4,"Select")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,6,"Action")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(9,8,"UserName")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(12,10,"Time")," "))}function i(d,y){if(1&d){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"button",22),e.\u0275\u0275listener("click",function(){const S=e.\u0275\u0275restoreView(r).$implicit,L=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(L.showEntityChangeDetails(S))}),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275element(4,"i",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"td")(6,"span",24),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td")(11,"span",24),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td")(16,"span",24),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(19),e.\u0275\u0275pipe(20,"luxonFormat"),e.\u0275\u0275elementEnd()()}if(2&d){const r=y.$implicit,l=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("title",e.\u0275\u0275pipeBind1(3,8,"Select")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",l.l("Select")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,10,"Action")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.changeTypeName," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,12,"UserName")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.userName," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(18,14,"Time")),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(20,16,r.changeTime,"F")," ")}}function o(d,y){1&d&&(e.\u0275\u0275elementStart(0,"div",25),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&d&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"NoData")," "))}const c=function(){return{backdrop:"static"}},g=function(){return{"min-width":"25rem"}};let s=(()=>{class d extends f.c{constructor(r,l){super(r),this._auditLogService=l,this.isShown=!1,this.isInitialized=!1,this.filterText=""}show(r){this.options=r,this.modal.show()}refreshTable(){this.paginator.changePage(this.paginator.getPage())}close(){this.modal.hide()}shown(){this.isShown=!0,this.getRecordsIfNeeds(null)}getRecordsIfNeeds(r){!this.isShown||(this.getRecords(r),this.isInitialized=!0)}getRecords(r){this.primengTableHelper.showLoadingIndicator(),this._auditLogService.getEntityTypeChanges(this.options.entityTypeFullName,this.options.entityId,this.primengTableHelper.getSorting(this.dataTable),this.primengTableHelper.getMaxResultCount(this.paginator,r),this.primengTableHelper.getSkipCount(this.paginator,r)).pipe((0,t.x)(()=>this.primengTableHelper.hideLoadingIndicator())).subscribe(l=>{this.primengTableHelper.totalRecordsCount=l.totalCount,this.primengTableHelper.records=l.items,this.primengTableHelper.hideLoadingIndicator()})}showEntityChangeDetails(r){this.entityChangeDetailModal.show(r)}}return d.\u0275fac=function(r){return new(r||d)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(C.xWy))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["entityTypeHistoryModal"]],viewQuery:function(r,l){if(1&r&&(e.\u0275\u0275viewQuery(h,7),e.\u0275\u0275viewQuery(n,7),e.\u0275\u0275viewQuery(p,7),e.\u0275\u0275viewQuery(u,7)),2&r){let _;e.\u0275\u0275queryRefresh(_=e.\u0275\u0275loadQuery())&&(l.entityChangeDetailModal=_.first),e.\u0275\u0275queryRefresh(_=e.\u0275\u0275loadQuery())&&(l.modal=_.first),e.\u0275\u0275queryRefresh(_=e.\u0275\u0275loadQuery())&&(l.dataTable=_.first),e.\u0275\u0275queryRefresh(_=e.\u0275\u0275loadQuery())&&(l.paginator=_.first)}},features:[e.\u0275\u0275InheritDefinitionFeature],decls:24,vars:23,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","modal","aria-hidden","true",1,"modal","fade",3,"config","onShown"],["modal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"primeng-paging-container"],[3,"rows","totalRecords","rowsPerPageOptions","showCurrentPageReport","currentPageReportTemplate","onPageChange"],["paginator",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline","btn-outline-primary","fw-bold",3,"click"],["entityChangeDetailModal",""],[1,"modal-title"],[2,"width","15%"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"title","click"],[1,"la","la-chevron-circle-right"],[1,"p-column-title"],[1,"primeng-no-data"]],template:function(r,l){1&r&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275listener("onShown",function(){return l.shown()}),e.\u0275\u0275elementStart(2,"div",2)(3,"div",3)(4,"div",4),e.\u0275\u0275template(5,O,4,5,"h4",5),e.\u0275\u0275elementStart(6,"button",6),e.\u0275\u0275listener("click",function(){return l.close()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",7)(8,"div",8)(9,"p-table",9,10),e.\u0275\u0275listener("onLazyLoad",function(S){return l.getRecordsIfNeeds(S)}),e.\u0275\u0275template(11,R,13,12,"ng-template",11),e.\u0275\u0275template(12,i,21,19,"ng-template",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(13,o,3,3,"div",13),e.\u0275\u0275elementStart(14,"div",14)(15,"p-paginator",15,16),e.\u0275\u0275listener("onPageChange",function(S){return l.getRecordsIfNeeds(S)}),e.\u0275\u0275pipe(17,"localize"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(18,"div",17)(19,"button",18),e.\u0275\u0275listener("click",function(){return l.close()}),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"localize"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(22,"entityChangeDetailModal",null,19)),2&r&&(e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(21,c)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",l.options),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-label",l.l("Close")),e.\u0275\u0275advance(2),e.\u0275\u0275property("busyIf",l.primengTableHelper.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("rows",l.primengTableHelper.defaultRecordsCountPerPage),e.\u0275\u0275property("value",l.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.\u0275\u0275pureFunction0(22,g)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0==l.primengTableHelper.totalRecordsCount),e.\u0275\u0275advance(2),e.\u0275\u0275property("rows",l.primengTableHelper.defaultRecordsCountPerPage)("totalRecords",l.primengTableHelper.totalRecordsCount)("rowsPerPageOptions",l.primengTableHelper.predefinedRecordsCountPerPage)("showCurrentPageReport",!0)("currentPageReportTemplate",e.\u0275\u0275pipeBind2(17,16,"TotalRecordsCount",l.primengTableHelper.totalRecordsCount)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,19,"Close")," "))},dependencies:[v.O5,T.U,M.iA,b.jx,I.D,D.Z,P.S,x.n,m.F],encapsulation:2}),d})()},55397:(B,E,a)=>{a.d(E,{Z:()=>R});var f=a(25736),t=a(25575);var v=a(97298);const I=function b(i,o){return o.length<2?i:(0,v.Z)(i,function T(i,o,c){var g=-1,s=i.length;o<0&&(o=-o>s?0:s+o),(c=c>s?s:c)<0&&(c+=s),s=o>c?0:c-o>>>0,o>>>=0;for(var d=Array(s);++g<s;)d[g]=i[g+o];return d}(o,0,-1))};var D=a(62168);const x=function P(i,o){return o=(0,t.Z)(o,i),null==(i=I(i,o))||delete i[(0,D.Z)(function e(i){var o=null==i?0:i.length;return o?i[o-1]:void 0}(o))]};var m=a(56667),n=Array.prototype.splice;const R=function O(i,o){var c=[];if(!i||!i.length)return c;var g=-1,s=[],d=i.length;for(o=(0,f.Z)(o,3);++g<d;){var y=i[g];o(y,g,i)&&(c.push(y),s.push(g))}return function p(i,o){for(var c=i?o.length:0,g=c-1;c--;){var s=o[c];if(c==g||s!==d){var d=s;(0,m.Z)(s)?n.call(i,s,1):x(i,s)}}}(i,s),c}}}]);