"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[62054],{62054:(S,h,l)=>{l.r(h),l.d(h,{DynamicEntityPropertyValueModule:()=>M});var e=l(75603),g=l(60263),m=l(91170),t=l(69291),r=l(41571);const I=[{path:"",component:t.J,pathMatch:"full"}];let T=(()=>{class c{}return c.\u0275fac=function(C){return new(C||c)},c.\u0275mod=r.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=r.\u0275\u0275defineInjector({imports:[m.Bz.forChild(I),m.Bz]}),c})(),M=(()=>{class c{}return c.\u0275fac=function(C){return new(C||c)},c.\u0275mod=r.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=r.\u0275\u0275defineInjector({imports:[g.o,e.g,T]}),c})()},69291:(S,h,l)=>{l.d(h,{J:()=>y});var e=l(41571),g=l(58127),m=l(37857),t=l(50216),r=l(19161),I=l(36895),T=l(17806),M=l(7318),c=l(10805),f=l(73565),C=l(34201);function V(o,d){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"th"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"th"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",7),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"localize"),e.\u0275\u0275elementEnd()()),2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,3,"PropertyName")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,5,"Values")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,7,"Actions")))}function v(o,d){1&o&&e.\u0275\u0275elementContainer(0)}function D(o,d){if(1&o){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",10),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(a);const _=e.\u0275\u0275nextContext().$implicit,E=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(E.deleteAllValuesOfDynamicEntityPropertyId(_))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Delete")," "))}function i(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,v,1,0,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275template(6,D,3,3,"button",9),e.\u0275\u0275pipe(7,"permission"),e.\u0275\u0275elementEnd()()),2&o){const a=d.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",a.data.propertyName," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngComponentOutlet",a.definition.component)("ngComponentOutletInjector",a.injector),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,4,"Pages.Administration.DynamicEntityPropertyValue.Delete"))}}function s(o,d){1&o&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&o&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"NoData")," "))}function n(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div",1)(1,"p-table",2,3),e.\u0275\u0275template(3,V,10,9,"ng-template",4),e.\u0275\u0275template(4,i,8,6,"ng-template",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(5,s,3,3,"div",6),e.\u0275\u0275elementEnd()),2&o){const a=e.\u0275\u0275nextContext();e.\u0275\u0275property("busyIf",a.primengTableHelper.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("value",a.items)("paginator",!1),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0==a.items.length)}}class p{constructor(d,a){this.data=d,this.definition=a}}let y=(()=>{class o extends g.c{constructor(a,u,_){super(a),this._injector=a,this._dynamicEntityPropertyValueService=u,this._inputTypeConfigurationService=_,this.onSaveDone=new e.EventEmitter,this.initialized=!1}ngOnInit(){this.initialize()}initialize(){this.initialized=!1,this._dynamicEntityPropertyValueService.getAllDynamicEntityPropertyValues(this.entityFullName,this.entityId).subscribe(a=>{a.items&&(this.items=a.items.map(u=>{let _=this._inputTypeConfigurationService.getByInputType(u.inputType),E=new p(u,_),x=e.Injector.create({providers:[{provide:t.cT,useValue:u.selectedValues},{provide:t.TH,useValue:u.allValuesInputTypeHas},{provide:t.Ql,useValue:O=>{E.componentInstance=O}}],parent:this._injector});return E.injector=x,E})),this.initialized=!0,this.hideMainSpinner()},a=>{this.hideMainSpinner()})}deleteAllValuesOfDynamicEntityPropertyId(a){this.message.confirm(this.l("DeleteDynamicEntityPropertyValueMessage",a.data.propertyName),this.l("AreYouSure"),u=>{u&&this._dynamicEntityPropertyValueService.cleanValues(new m.RM({dynamicEntityPropertyId:a.data.dynamicEntityPropertyId,entityId:this.entityId})).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.initialize()})})}saveAll(){if(!this.items||0===this.items.length)return;let a=[];for(let u=0;u<this.items.length;u++){const _=this.items[u];a.push(new m.COX({dynamicEntityPropertyId:_.data.dynamicEntityPropertyId,entityId:this.entityId,values:_.componentInstance.getSelectedValues()}))}this._dynamicEntityPropertyValueService.insertOrUpdateAllValues(new m.O3u({items:a})).subscribe(()=>{abp.notify.success(this.l("SavedSuccessfully")),this.initialize(),this.hideMainSpinner(),this.onSaveDone&&this.onSaveDone.emit()},u=>{this.hideMainSpinner()})}}return o.\u0275fac=function(a){return new(a||o)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(m.mQH),e.\u0275\u0275directiveInject(r.R))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["dynamic-entity-property-value-manager"]],inputs:{entityFullName:"entityFullName",entityId:"entityId"},outputs:{onSaveDone:"onSaveDone"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["class","col primeng-datatable-container",3,"busyIf",4,"ngIf"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","paginator"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[2,"width","100px"],[4,"ngComponentOutlet","ngComponentOutletInjector"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(a,u){1&a&&e.\u0275\u0275template(0,n,6,4,"div",0),2&a&&e.\u0275\u0275property("ngIf",u.initialized)},dependencies:[I.$G,I.O5,T.U,M.iA,c.jx,f.F,C.a],encapsulation:2}),o})()},50216:(S,h,l)=>{l.d(h,{Ql:()=>t,TH:()=>m,cT:()=>g});var e=l(41571);const g=new e.InjectionToken("selectedValues"),m=new e.InjectionToken("allValues"),t=new e.InjectionToken("componentInstance")},19161:(S,h,l)=>{l.d(h,{R:()=>D});var e=l(58127),g=l(50216);class m extends e.c{constructor(s){super(s),this.selectedValues=s.get(g.cT),this.allValues=s.get(g.TH),s.get(g.Ql)(this)}}var t=l(41571),r=l(24006);let I=(()=>{class i extends m{constructor(n){super(n)}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}ngOnInit(){this.selectedValue=this.selectedValues[0]}}return i.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.Injector))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-single-line-string-input-type"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(n,p){1&n&&(t.\u0275\u0275elementStart(0,"input",0),t.\u0275\u0275listener("ngModelChange",function(o){return p.selectedValue=o}),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275property("ngModel",p.selectedValue)},dependencies:[r.DefaultValueAccessor,r.NgControlStatus,r.NgModel]}),i})(),T=(()=>{class i extends m{constructor(n){super(n)}ngOnInit(){this.checked=this.selectedValues&&this.selectedValues[0]&&"true"===this.selectedValues[0]}getSelectedValues(){return[this.checked.toString()]}}return i.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.Injector))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-checkbox-input-type"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[1,"checkbox-inline"],[1,"checkbox","checkbox-solid"],["type","checkbox","value","true",3,"ngModel","ngModelChange"]],template:function(n,p){1&n&&(t.\u0275\u0275elementStart(0,"div",0)(1,"label",1)(2,"input",2),t.\u0275\u0275listener("ngModelChange",function(o){return p.checked=o}),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(3,"span"),t.\u0275\u0275elementEnd()()),2&n&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngModel",p.checked))},dependencies:[r.CheckboxControlValueAccessor,r.NgControlStatus,r.NgModel]}),i})();var M=l(36895);function c(i,s){if(1&i&&(t.\u0275\u0275elementStart(0,"option",3),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&i){const n=s.$implicit;t.\u0275\u0275property("value",n),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(n)}}let f=(()=>{class i extends m{constructor(n){super(n)}ngOnInit(){this.selectedValue=this.selectedValues[0]}getSelectedValues(){return this.selectedValue?[this.selectedValue]:[]}}return i.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.Injector))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-combobox-input-type"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,p){1&n&&(t.\u0275\u0275elementStart(0,"select",0),t.\u0275\u0275listener("ngModelChange",function(o){return p.selectedValue=o}),t.\u0275\u0275element(1,"option",1),t.\u0275\u0275template(2,c,2,2,"option",2),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275property("ngModel",p.selectedValue),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",p.allValues))},dependencies:[M.sg,r.NgSelectOption,r.\u0275NgSelectMultipleOption,r.SelectControlValueAccessor,r.NgControlStatus,r.NgModel]}),i})();var C=l(3631);let V=(()=>{class i extends m{constructor(n){super(n)}ngOnInit(){this.filteredValues=this.allValues}getSelectedValues(){return this.selectedValues?this.selectedValues:[]}filter(n){this.filteredValues=this.allValues.filter(p=>p.toLowerCase().includes(n.query.toLowerCase()))}}return i.\u0275fac=function(n){return new(n||i)(t.\u0275\u0275directiveInject(t.Injector))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-multiple-select-input-type"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:1,vars:4,consts:[["inputStyleClass","form-control","styleClass","width-percent-100",3,"ngModel","suggestions","minLength","multiple","ngModelChange","completeMethod"]],template:function(n,p){1&n&&(t.\u0275\u0275elementStart(0,"p-autoComplete",0),t.\u0275\u0275listener("ngModelChange",function(o){return p.selectedValues=o})("completeMethod",function(o){return p.filter(o)}),t.\u0275\u0275elementEnd()),2&n&&t.\u0275\u0275property("ngModel",p.selectedValues)("suggestions",p.filteredValues)("minLength",1)("multiple",!0)},dependencies:[r.NgControlStatus,r.NgModel,C.Qc],encapsulation:2}),i})();class v{constructor(s,n,p){this.name=s,this.component=n,this.hasValues=p}}let D=(()=>{class i{constructor(){this.initialize()}getByName(n){let p=this.InputTypeConfigurationDefinitions.filter(y=>y.name===n);return p&&1===p.length?p[0]:null}getByInputType(n){return this.getByName(n.name)}initialize(){let n=new v("SINGLE_LINE_STRING",I,!1),p=new v("CHECKBOX",T,!1),y=new v("COMBOBOX",f,!0),o=new v("MULTISELECTCOMBOBOX",V,!0);this.InputTypeConfigurationDefinitions=[],this.InputTypeConfigurationDefinitions.push(n),this.InputTypeConfigurationDefinitions.push(p),this.InputTypeConfigurationDefinitions.push(y),this.InputTypeConfigurationDefinitions.push(o)}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275prov=t.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);