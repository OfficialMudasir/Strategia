"use strict";(self.webpackChunkabp_zero_template=self.webpackChunkabp_zero_template||[]).push([[46162],{46162:(E,s,o)=>{o.r(s),o.d(s,{DynamicEntityPropertiesModule:()=>h});var e=o(75603),u=o(60263),v=o(91170),p=o(17799),c=o(41571);const f=[{path:"",component:p.E,pathMatch:"full"}];let g=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=c.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=c.\u0275\u0275defineInjector({imports:[v.Bz.forChild(f),v.Bz]}),l})(),h=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=c.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=c.\u0275\u0275defineInjector({imports:[u.o,e.g,g]}),l})()},17799:(E,s,o)=>{o.d(s,{E:()=>A});var e=o(41571),u=o(58127),v=o(91170),p=o(37857),c=o(36895),f=o(17806),g=o(7318),h=o(10805),l=o(438),y=o(4128),d=o(24006),P=o(61228),b=o(73565);const _=["createModal"];function M(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"option",20),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&n){const t=r.$implicit;e.\u0275\u0275property("value",t.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",t.propertyName," ")}}function C(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"div",6)(2,"h4",7)(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"button",8),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.close())}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",9)(8,"div",10)(9,"div",11)(10,"label",12),e.\u0275\u0275text(11),e.\u0275\u0275pipe(12,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"select",13),e.\u0275\u0275listener("ngModelChange",function(a){e.\u0275\u0275restoreView(t);const m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.dynamicEntityProperty.dynamicPropertyId=a)}),e.\u0275\u0275elementStart(14,"option",14),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(17,M,2,2,"option",15),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(18,"div",16)(19,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.close())}),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.save())}),e.\u0275\u0275element(23,"i",19),e.\u0275\u0275elementStart(24,"span"),e.\u0275\u0275text(25),e.\u0275\u0275pipe(26,"localize"),e.\u0275\u0275elementEnd()()()()}if(2&n){const t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,13,"AddNewDynamicEntityProperty")),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.saving),e.\u0275\u0275attribute("aria-label",t.l("Close")),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(12,15,"Parameter")," *"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",t.dynamicEntityProperty.dynamicPropertyId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(16,17,"SelectADynamicProperty")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.allDynamicProperties),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",t.saving),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(21,19,"Cancel")," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.dynamicEntityProperty.entityFullName||!t.dynamicEntityProperty.dynamicPropertyId)("buttonBusy",t.saving)("busyText",t.l("SavingWithThreeDot")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(26,21,"Save"))}}function D(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"div",3)(1,"div",4),e.\u0275\u0275template(2,C,27,23,"div",5),e.\u0275\u0275elementEnd()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.initialized)}}const S=function(n){return{backdrop:"static",keyboard:n}};let x=(()=>{class n extends u.c{constructor(t,i,a,m){super(t),this._dynamicEntityPropertyService=i,this._dynamicPropertyService=a,this._dynamicEntityParameterDefinitionService=m,this.modalSave=new e.EventEmitter,this.dynamicEntityProperty=new p.RcM,this.initialized=!1,this.saving=!1}show(t){this.entityFullName=t,this.initialize(),this.dynamicEntityProperty=new p.RcM,this.dynamicEntityProperty.entityFullName=this.entityFullName,this.modal.show()}save(){this.saving=!0,this.showMainSpinner(),this.dynamicEntityProperty.tenantId=abp.session.tenantId,this._dynamicEntityPropertyService.add(this.dynamicEntityProperty).subscribe(()=>{this.notify.info(this.l("SavedSuccessfully")),this.hideMainSpinner(),this.modalSave.emit(null),this.modal.hide(),this.saving=!1},t=>{this.hideMainSpinner(),this.saving=!1})}close(){this.modal.hide()}initialize(){this.initialized=!1;let t=this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName),i=this._dynamicPropertyService.getAll();this.showMainSpinner(),(0,y.D)([i,t]).subscribe(([a,m])=>{this.allDynamicProperties=a.items.filter(function(R){return-1===m.items.map(O=>O.dynamicPropertyId).indexOf(R.id)}),this.hideMainSpinner(),this.initialized=!0},a=>{this.hideMainSpinner()})}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(p.kvd),e.\u0275\u0275directiveInject(p.ddT),e.\u0275\u0275directiveInject(p._5w))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["create-dynamic-entity-property-modal"]],viewQuery:function(t,i){if(1&t&&e.\u0275\u0275viewQuery(_,5),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.modal=a.first)}},outputs:{modalSave:"modalSave"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],["class","modal-dialog modal-lg",4,"ngIf"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"disabled","click"],[1,"modal-body"],[1,"mb-5","col-12"],[1,"mb-5"],["for","Name",1,"form-label"],["required","",1,"form-select",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline","btn-outline-primary","fw-bold",3,"disabled","click"],["type","button",1,"btn","btn-primary","fw-bold",3,"disabled","buttonBusy","busyText","click"],[1,"fa","fa-save"],[3,"value"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275template(2,D,3,1,"div",2),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("config",e.\u0275\u0275pureFunction1(2,S,!i.saving)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.initialized))},dependencies:[c.sg,c.O5,d.NgSelectOption,d.\u0275NgSelectMultipleOption,d.SelectControlValueAccessor,d.NgControlStatus,d.RequiredValidator,d.NgModel,P.L,l.Z,b.F],encapsulation:2}),n})();var I=o(34201);const T=["createDynamicEntityPropertyModal"],w=["createModal"];function z(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.addNewDynamicEntityProperty())}),e.\u0275\u0275element(1,"i",23),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(3,1,"AddNewDynamicEntityProperty")," "))}function N(n,r){1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"th"),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"th",24),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"DynamicProperty")))}function F(n,r){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const a=e.\u0275\u0275nextContext().$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.deleteDynamicEntityProperty(a.id))}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"Delete")," "))}function B(n,r){if(1&n&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275template(4,F,3,3,"button",25),e.\u0275\u0275pipe(5,"permission"),e.\u0275\u0275elementEnd()()),2&n){const t=r.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.dynamicPropertyName," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(5,2,"Pages.Administration.DynamicEntityProperties.Delete"))}}function V(n,r){1&n&&(e.\u0275\u0275elementStart(0,"div",27),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"NoData")," "))}const j=function(){return{backdrop:"static"}},k=function(){return{"min-width":"50rem"}};let A=(()=>{class n extends u.c{constructor(t,i,a){super(t),this._activatedRoute=i,this._dynamicEntityPropertyService=a,this.onPropertyChange=new e.EventEmitter}show(t){this.entityFullName=t,this.getDynamicEntityProperties(),this.modal.show()}handlePropertyChanges(){this.onPropertyChange.emit(null),this.getDynamicEntityProperties()}getDynamicEntityProperties(){this.showMainSpinner(),this._dynamicEntityPropertyService.getAllPropertiesOfAnEntity(this.entityFullName).subscribe(t=>{this.primengTableHelper.totalRecordsCount=t.items.length,this.primengTableHelper.records=t.items,this.primengTableHelper.hideLoadingIndicator(),this.hideMainSpinner()},t=>{this.hideMainSpinner()})}addNewDynamicEntityProperty(){this.createDynamicEntityPropertyModal.show(this.entityFullName)}deleteDynamicEntityProperty(t){this.message.confirm(this.l("DeleteDynamicPropertyMessage"),this.l("AreYouSure"),i=>{i&&this._dynamicEntityPropertyService.delete(t).subscribe(()=>{abp.notify.success(this.l("SuccessfullyDeleted")),this.handlePropertyChanges()})})}close(){this.modal.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(e.Injector),e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(p.kvd))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["manage-dynamic-entity-property-modal"]],viewQuery:function(t,i){if(1&t&&(e.\u0275\u0275viewQuery(T,5),e.\u0275\u0275viewQuery(w,5)),2&t){let a;e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.createDynamicEntityPropertyModal=a.first),e.\u0275\u0275queryRefresh(a=e.\u0275\u0275loadQuery())&&(i.modal=a.first)}},outputs:{onPropertyChange:"onPropertyChange"},features:[e.\u0275\u0275InheritDefinitionFeature],decls:28,vars:20,consts:[["appBsModal","","tabindex","-1","role","dialog","aria-labelledby","createModal","aria-hidden","true",1,"modal","fade",3,"config"],["createModal","bs-modal"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-12",2,"height","40px"],["class","btn btn-primary float-end",3,"click",4,"ngIf"],[1,"clear-fix"],[1,"col-12"],[1,"col","primeng-datatable-container",3,"busyIf"],[3,"value","rows","paginator","lazy","tableStyle","onLazyLoad"],["dataTable",""],["pTemplate","header"],["pTemplate","body"],["class","primeng-no-data",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline","btn-outline-primary","fw-bold",3,"click"],[3,"modalSave"],["createDynamicEntityPropertyModal",""],[1,"btn","btn-primary","float-end",3,"click"],[1,"fa","fa-plus"],[2,"width","100px"],["class","btn btn-danger bt-sm",3,"click",4,"ngIf"],[1,"btn","btn-danger","bt-sm",3,"click"],[1,"primeng-no-data"]],template:function(t,i){1&t&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5)(6,"span"),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"localize"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"button",6),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",7)(11,"div",8),e.\u0275\u0275template(12,z,4,3,"button",9),e.\u0275\u0275pipe(13,"permission"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"div",10),e.\u0275\u0275elementStart(15,"div",11)(16,"div",12)(17,"p-table",13,14),e.\u0275\u0275listener("onLazyLoad",function(){return i.getDynamicEntityProperties()}),e.\u0275\u0275template(19,N,5,3,"ng-template",15),e.\u0275\u0275template(20,B,6,4,"ng-template",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,V,3,3,"div",17),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",18)(23,"button",19),e.\u0275\u0275listener("click",function(){return i.close()}),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"localize"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(26,"create-dynamic-entity-property-modal",20,21),e.\u0275\u0275listener("modalSave",function(){return i.handlePropertyChanges()}),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(18,j)),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(8,12,"AddNewDynamicEntityProperty")),e.\u0275\u0275advance(2),e.\u0275\u0275attribute("aria-label",i.l("Close")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(13,14,"Pages.Administration.DynamicEntityProperties.Create")),e.\u0275\u0275advance(4),e.\u0275\u0275property("busyIf",i.primengTableHelper.isLoading),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("rows",i.primengTableHelper.defaultRecordsCountPerPage),e.\u0275\u0275property("value",i.primengTableHelper.records)("paginator",!1)("lazy",!0)("tableStyle",e.\u0275\u0275pureFunction0(19,k)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",0==i.primengTableHelper.totalRecordsCount),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,16,"Close")," "))},dependencies:[c.O5,f.U,g.iA,h.jx,l.Z,x,b.F,I.a],encapsulation:2}),n})()}}]);